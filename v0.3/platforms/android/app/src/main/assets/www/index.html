<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="./img/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8" />
        <link rel="icon" href="./img/logo.png" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="theme-color" content="#000000" />
        <meta
          name="Lista de tareas"
          content="Web diseñada para añadir tareas a una lista (obviamente)."
        />
        <link href="./styles.css" rel="stylesheet" />
        <link href="../src/styles.css" rel="stylesheet" />
        <link rel="apple-touch-icon" href="./img/logo.png" />
        <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
        <script
          src="https://kit.fontawesome.com/8946387bf5.js"
          crossorigin="anonymous"
        ></script>
        <title>Lista de tareas</title>
        <script src="./main.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      </head>
      <body>
        <div class="bg-white shadow-lg overflow-hidden">
          <div class="px-4 py-2">
            <h1 class="text-gray-800 font-bold text-2xl uppercase text-center">
              Lista de tareas
            </h1>
          </div>
          <form class="w-full px-4 py-2">
            <div class="flex items-center border-b-2 border-blue-600 py-2">
              <input
                class="appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"
                type="text"
                placeholder="Añade una tarea"
                id="addTarea"
              />
              <button
                class="flex-shrink-0 bg-blue-600 hover:bg-blue-800 border-blue-600 hover:border-blue-700 text-sm border-4 text-white py-1 px-2 rounded"
                type="button"
                id="botonAñadir"
              >
                Añadir
              </button>
            </div>
          </form>
          <ul class="divide-y divide-gray-200 px-4" id="formTareas">
            <li class="py-4">
              <div class="flex items-center">
                <input
                  id="todo1"
                  name="todo1"
                  type="checkbox"
                  class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                />
                <label class="ml-3 text-gray-900 flex flex-col">
                  <span class="text-lg font-medium">Terminar</span>
                  <span class="text-sm font-light text-gray-500"
                    >13 de diciembre de 2023</span
                  >
                </label>
                <button
                  class="ml-auto bg-blue-600 hover:bg-blue-800 border-blue-600 hover:border-blue-700 text-sm border-4 text-white py-1 px-2 rounded edit-button"
                  type="button"
                >
                  Editar
                </button>
              </div>
            </li>
            <li class="py-4">
              <div class="flex items-center">
                <input
                  id="todo2"
                  name="todo2"
                  type="checkbox"
                  class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                />
                <label class="ml-3 text-gray-900 flex flex-col">
                  <span class="text-lg font-medium">Terminar CV</span>
                  <span class="text-sm font-light text-gray-500"
                    >13 de diciembre de 2023</span
                  >
                </label>
                <button
                  class="ml-auto bg-blue-600 hover:bg-blue-800 border-blue-600 hover:border-blue-700 text-sm border-4 text-white py-1 px-2 rounded edit-button"
                  type="button"
                >
                  Editar
                </button>
              </div>
            </li>
            <li class="py-4">
              <div class="flex items-center">
                <input
                  id="todo3"
                  name="todo3"
                  type="checkbox"
                  class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                />
                <label class="ml-3 text-gray-900 flex flex-col">
                  <span class="text-lg font-medium">Terminar CV</span>
                  <span class="text-sm font-light text-gray-500"
                    >13 de diciembre de 2023</span
                  >
                </label>
                <button
                  class="ml-auto bg-blue-600 hover:bg-blue-800 border-blue-600 hover:border-blue-700 text-sm border-4 text-white py-1 px-2 rounded edit-button"
                  type="button"
                >
                  Editar
                </button>
              </div>
            </li>
          </ul>
        </div>

        <script>
          $(document).ready(function () {
            $("#botonAñadir").click(function () {
              var nuevaTarea = $("#addTarea").val();
              var fechaActual = new Date();
              var opcionesDeFormato = {
                day: "numeric",
                month: "long",
                year: "numeric",
              };
              var formatoFecha = new Intl.DateTimeFormat(
                "es-ES",
                opcionesDeFormato
              );
              var fechaFormateada = formatoFecha.format(fechaActual);
              var nuevaTareaContenido =
                "<li class='py-4'><div class='flex items-center'><input id='todo1' name='todo1' type='checkbox' class='h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded'><label for='todo1' class='ml-3 block text-gray-900 flex flex-col'><span class='text-lg font-medium'>" +
                nuevaTarea +
                "</span><span class='text-sm font-light text-gray-500'>" +
                fechaFormateada +
                "</span></label><button class='ml-auto bg-blue-600 hover:bg-blue-800 border-blue-600 hover:border-blue-700 text-sm border-4 text-white py-1 px-2 rounded edit-button' type='button'>Editar</button></div></li>";
              $("#formTareas").append(nuevaTareaContenido);
              bindCheckboxEvent();
            });

            bindCheckboxEvent();

            function bindCheckboxEvent() {
              $('input[type="checkbox"]')
                .off("click")
                .on("click", function () {
                  $(this).closest("li").remove();
                });
            }

            $(document).on("click", ".edit-button", function () {
              var label = $(this).prev("label");
              var span = label.find("span:first");
              span.attr("contentEditable", true);
              var textNode = span.get(0).childNodes[0];
              var range = document.createRange();
              var sel = window.getSelection();
              range.setStart(textNode, textNode.length);
              range.collapse(true);
              sel.removeAllRanges();
              sel.addRange(range);
              span.focus();
            });
          });
        </script>
      </body>
    </html>
  </head>
</html>
